# 0412 Review ğŸ“–

### Data Frame
pd.DataFrame(r.json()['OutBlock_1'])
dataFrameìœ¼ë¡œ ë§Œë“¤ì–´ì¤Œ

### .unique()
- ë°ì´í„° ì¤‘ì— ìœ ì¼í•œ ê°’(ê³ ìœ í•œ ê°’)ì„ ì°¾ì„ ë•Œ ì“°ëŠ” í•¨ìˆ˜ 
ë™ëª…ì´ì¸ ë¹¼ê³ ì‹¶ì–´ì„œ, unique()ë§Œ í•˜ë©´ ì„ ìˆ˜ëª… ë‚˜ì˜´ ëŒ€ì‹  ì¤‘ë³µê°’í¬í•¨

### .duplicated()
df[df.duplicated()]
- ë°ì´í„° ì¤‘ì— ì¤‘ë³µê°’ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ì½”ë“œ
- ë‹¨ data frameì•ˆì—ì„œì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©í•¨
- DataFrame.duplicated()

```
df.drop_duplicates(inplace=True)
```
ì¤‘ë³µê°’ì´ ìˆëŠ”ì§€ í™•ì¸ í›„ ì¤‘ë³µê°’ ì œê±°


### .shape
- rowì™€ columnì˜ ì°¨ì›ì„ í‘œì‹œí•˜ëŠ” ê°œë…
- íŠœí”Œë¡œ (row, col)ë¥¼ ë‚˜íƒ€ë‚´ì¤Œ
- ë™ëª…ì´ì¸ì¸ ì‚¬ëŒì˜ ìˆ˜ì™€ column ìˆ˜ í‘œì‹œ
```
preprocessing[preprocessing['ì„ ìˆ˜ëª…'].duplicated()].shape
(40, 15)
```

### copy() ëª¨ë“ˆì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ?
- ì›ë³¸ ë°ì´í„°ì—ì„œ ê°’ì„ êº¼ë‚´ê³  ìˆ˜ì •í•˜ë‹¤ë³´ë©´ ì›ë³¸ ë°ì´í„°ê°€ ë³€ê²½ ë  ìˆ˜ ìˆëŠ”ë° ë¦¬ìŠ¤íŠ¸ë¥¼ ë³µì‚¬í•¨ìœ¼ë¡œì¨ ì´ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤
- ë°ì´í„°ì—ì„œ ì–´ë–¤ ì¡°ê±´ì„ ë½‘ì„ ë•Œ ì‚¬ìš©í•˜ê¸¸ ê¶Œì¥í•¨


pd.DataFrame(search_starbucks(None))[['addr']]
ë°ì´í„° í”„ë ˆì„ìœ¼ë¡œ ì—¬ëŸ¬ ì»¬ëŸ¼ë“¤ì„ ë‹´ê³  ì‹¶ì„ ë•Œ
pd.DataFrame(search_starbucks(None))['addr']
seriesë¥¼ 

### Data Frame í•©ì¹˜ê¸° (merge, join, concat)
- merge  
pd.merge(right, left, left_on, right_on, how)
keyê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ë‘ ê°œì˜ ë°ì´í„° í”„ë ˆì„ì„ í•©ì¹  ë•Œ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜  
_on: ì •ë ¬í•  ê¸°ì¤€ì´ ë  key  
how : ë³‘í•©ì‹œí‚¬ ìœ„ì¹˜

```
imort pandas as pd

pd.set_option('preprocessing', 10)
pd.set_option('original_extract', 20)

pd.merge(preprocessing, original_extract, left_on=['ì„ ìˆ˜ëª…', 'ë“±ë²ˆí˜¸'], right_on=['ì„ ìˆ˜ëª…', 'ë“±ë²ˆí˜¸'], how='left')
```
ì™¼ìª½ dataframeì„ ê¸°ì¤€ìœ¼ë¡œ ë³‘í•©ë˜ê¸° ë•Œë¬¸ì— 10ê°œì˜ í–‰ì´ ë§Œë“¤ì–´ì§„ë‹¤. 

- join  
mergeì™€ ê±°ì˜ í° ì°¨ì´ê°€ ì—†ì´ ë¹„ìŠ·í•œ ë³‘í•© í•¨ìˆ˜ì´ë‹¤
```
df1.join(df2. how='left')
```
df1ì— df2ë¥¼ ê²°í•©í•˜ëŠ” ê²ƒ
onê°’ì— ë”°ë¼ ê²°í•© ìœ„ì¹˜ê°€ ë³€ê²½ëœë‹¤

- concat  
pd.concat([ë°ì´í„°í”„ë ˆì„], [ë°ì´í„°í”„ë ˆì„])  
ë‹¨ì–´ ê·¸ëŒ€ë¡œ ë°ì´í„° í”„ë ˆì„ì„ ì´ì–´ë¶™ì´ëŠ” ê²ƒ  
dataframeì˜ ê²°í•©ìœ¼ë¡œ dataframeë“¤ì„ í•©ì¹˜ëŠ” ê²ƒ  
appendëŠ” indexì™€ columnì´ ì—†ì–´ë„ ì‚¬ìš© ê°€ëŠ¥í•˜ì§€ë§Œ concatì€ ê·¸ëŸ´ ìˆ˜ ì—†ë‹¤  

```
stock1
	ë‚ ì§œ	ì¢…ê°€	ì „ì¼ë¹„	ì‹œê°€	ê³ ê°€	ì €ê°€	ê±°ë˜ëŸ‰	ì¢…ëª©ì½”ë“œ
1	2022.04.12	280000.0	5500.0	277000.0	284500.0	275000.0	39222.0	128940
2	2022.04.11	274500.0	500.0	273000.0	275500.0	270000.0	18325.0	128940
3	2022.04.08	274000.0	10000.0	265000.0	275000.0	265000.0	29675.0	128940

stock2
ë‚ ì§œ	ì¢…ê°€	ì „ì¼ë¹„	ì‹œê°€	ê³ ê°€	ì €ê°€	ê±°ë˜ëŸ‰
1	2022.03.29	277000.0	2500.0	280500.0	280500.0	276500.0	15224.0
2	2022.03.28	279500.0	0.0	277500.0	280000.0	275500.0	14122.0

pd.concat([stock1, stock2])

ë‚ ì§œ	ì¢…ê°€	ì „ì¼ë¹„	ì‹œê°€	ê³ ê°€	ì €ê°€	ê±°ë˜ëŸ‰	ì¢…ëª©ì½”ë“œ
1	2022.04.12	280000.0	5500.0	277000.0	284500.0	275000.0	39222.0	128940
2	2022.04.11	274500.0	500.0	273000.0	275500.0	270000.0	18325.0	128940
3	2022.04.08	274000.0	10000.0	265000.0	275000.0	265000.0	29675.0	128940
1	2022.03.29	277000.0	2500.0	280500.0	280500.0	276500.0	15224.0	NaN
2	2022.03.28	279500.0	0.0	277500.0	280000.0	275500.0	14122.0	NaN
```
ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì€ Nanìœ¼ë¡œ nullê°’ìœ¼ë¡œ ê²°ì¸¡ì¹˜ê°€ í‘œì‹œëœë‹¤

+ ìœ„ì˜ ì •ë ¬ì„ ì—­ë°©í–¥ìœ¼ë¡œ í•˜ê¸°
```
pd.concat([stock1, stock2]).iloc[::-1]
```

### ê²°ì¸¡ì¹˜
ë°ì´í„°ì— nullê°’, ë°ì´í„°ê°€ ì—†ëŠ” ê²ƒ

- ê²°ì¸¡ê°’ ì°¾ê¸°
df.isnull().sum()
ê²°ì¸¡ê°’(true, false)ì¤‘ì—ì„œ trueì˜ ìˆ˜ë¥¼ ì„¸ì–´ì„œ ì´ í•©ìœ¼ë¡œ ë‚˜íƒ€ë‚´ì¤Œ

df[â€˜ì…ë‹¨ë…„ë„â€™] = df.ì…ë‹¨ë…„ë„


### .contains()
```
df[df[â€˜Teamâ€™].str.contains(â€˜ê³ ì–‘â€™)]
```
Teamì´ë¦„ì´ ê³ ì–‘ì¸ ì„ ìˆ˜ì˜ ëª©ë¡ì„ ë‚˜íƒ€ëƒ„


df.loc[df[â€˜Teamâ€™].str.contains(â€˜ê³ ì–‘â€™), â€˜Teamâ€™]=â€™ í‚¤ì›€ íˆì–´ë¡œì¦ˆâ€™
loc[]ë¥¼ ì‚¬ìš©í•´ì„œ Teamì´ë¦„ì´ ê³ ì–‘ì¸ ì„ ìˆ˜ë“¤ì˜ teamëª…ì„ í‚¤ì›€ íˆì–´ë¡œì¦ˆë¡œ ë³€ê²½ì‹œí‚¨ë‹¤=í‚¤ì›€ íˆì–´ë¡œì¦ˆë¡œ ë°”ë€Œê²Œ ëœë‹¤ í•©ì¹œë‹¤

### .set_options()
pd.set_option(â€˜display.max_rowsâ€™, None)
ë°ì´í„° ì „ì²´ë¥¼ í™”ë©´ì— ì¶œë ¥í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ë³€ìˆ˜


### groupby methodë¥¼ ì´ìš©í•œ ì§‘ê³„
- count()
ìš”ì†Œì˜ ê°¯ìˆ˜ë¥¼ êµ¬í•˜ëŠ” ê²ƒ
```
df.groupby(['Team'])[['ìš©ë³‘']].count()

	ìš©ë³‘
Team	
KIA íƒ€ì´ê±°ì¦ˆ	84
KT ìœ„ì¦ˆ	83
LG íŠ¸ìœˆìŠ¤	89
```

- sum()
ìš”ì†Œì˜ ê°¯ìˆ˜ë¥¼ êµ¬í•˜ëŠ” ê²ƒ
```
df.groupby(['Team'])[['ìš©ë³‘']].sum()

	ìš©ë³‘
Team	
KIA íƒ€ì´ê±°ì¦ˆ	3
KT ìœ„ì¦ˆ	3
LG íŠ¸ìœˆìŠ¤	3
```
ê° Teamì˜ ìš©ë³‘ì´ë¼ëŠ” ëª©ë¡ì˜ ê°¯ìˆ˜ë¥¼ êµ¬í•¨


### .dropna()
ê²°ì¸¡ì¹˜(nullì¸ ê°’)ì„ ì œê±°í•´ì£¼ëŠ” ì½”ë“œ
```
stock1 =pd.read_html(r.text)[0].dropna()
```

### 
```
def get_naver_stock(code, page=11):
    """
        code : ì¢…ëª©ì •ë³´ 
        page : í•´ë‹¹ í˜ì´ì§€ ì •ë³´ ì¶”ì¶œ 
    """
    url = "https://finance.naver.com/item/sise_day.naver?code={}&page={}"
    head = {"User-Agent" : "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.75 Safari/537.36 Edg/100.0.1185.36"}
    total = list()
    for x in range(1, page):
        r = requests.get(url.format(code, x), headers=head)
        total.append(pd.read_html(r.text)[0].dropna())
    total_df = pd.concat(total)
    total_df['ì¢…ëª©ì½”ë“œ'] = code
    return total_df.iloc[::-1]
```

### ì¸ë±ìŠ¤ ì„¤ì • í•´ì œ
df.reset_index(drop=True, inplace=True)
ì¸ë±ìŠ¤ ê°’ì„ ì‚­ì œì‹œí‚¤ê³  ì‹¶ì„ ë•Œ reset_index(drop=True)ë¥¼ ì ìš©

### ë…¼ë¦¬ ì—°ì‚°ì
- and -> &
- or -> |
- not -> ~

### .first() .nth()
df.groupby(['Team']).first()
groupbyì— ì˜í•´ Teamë‚´ì—ì„œ ê°€ì¥ ê¸°ì¤€ì´ ë†’ì€ ëŒ€ìƒì„ ì¶”ì¶œí•¨

df.groupby(['Team']).nth(0) #1ìœ„ 2ìœ„ 3ìœ„ ...
1st 2nd 3th 4th ì˜ nthë¡œ 


### ğŸ” ì˜ˆì œ
```
df.groupby([â€˜Teamâ€™, â€˜í¬ì§€ì…˜â€™], as_index=False)[[â€˜ì—°ë´‰(ë§Œì›)â€™]].mean()
```
Teamê³¼ í¬ì§€ì…˜ì„ dataframeìœ¼ë¡œ ë§Œë“¤ê³  ì¸ë±ìŠ¤ í•´ì œ í›„, ì—°ë´‰ì€ í‰ê·  ê°’ìœ¼ë¡œ ê³„ì‚°
Teamê³¼ í¬ì§€ì…˜ì´ ë™ì¼í•œ ì„ ìˆ˜ë“¤ì„ ë¬¶ì–´ì„œ columnì— ë§ëŠ” ê°ê°ì˜ ìˆ˜ë¥¼ í‘œì‹œ

```
df.loc[df['ì—°ë´‰'].notnull(), 'ìš©ë³‘'] = df.loc[df['ì—°ë´‰'].notnull(), 'ì—°ë´‰'].apply(lambda x:x[-2:] == 'ë‹¬ëŸ¬')
```
â€˜ë‹¬ëŸ¬â€™ë¡œ ì—°ë´‰ì´ ëë‚˜ëŠ” ì„ ìˆ˜ëŠ” ìš©ë³‘ìœ¼ë¡œ ì •ì˜í•˜ê³  ê·¸ ì¤‘ ì—°ë´‰ì˜ ê°’ì´ null ì´ ì•„ë‹Œ ì„ ìˆ˜ë§Œ dataframeìœ¼ë¡œ ì •ë¦¬
```

### ğŸ” ì˜ˆì œ - map í‘œì‹œí•˜ê¸°
```
import folium
seoul_map = folium.Map(location=[37.55,126.98], zoom_start=12)
```
ì§€ë„ë¥¼ ë¡œë”©í•˜ëŠ” ì½”ë“œ
